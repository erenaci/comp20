<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
		<title>Amicable Numbers</title>
    </head>
    <body>
        <form>
            <br>Number 1:<input id='num1' type='number'><br>
            <br>Number 2: <input id='num2' type='number'><br>
            <input type='button' value="Submit"
                   onclick = "readIn()">
        </form>
        <script language ="javascript">
            function readIn() {
                var num1 = document.getElementById('num1').value;
                var num2 = document.getElementById('num2').value;
                document.write("Your numbers are: ", num1, " and ", num2, "<br>");
                checkAmicable(num1, num2);
            }
            function isFactor(num, testNum) {
                if (num % testNum == 0) {
                    return true;
                }
                else {
                    return false;
                }
            }
//            document.write("isFactor(9,2) is ", isFactor(9, 2), "<br>");
            function showFactors(array) {
                for(var i = 0; i < array.length; i++) {
                    document.write(array[i], "&nbsp&nbsp");
                }
            }
//            var arr = new Array(5, 4, 2, 6); 
//            showFactors(arr);
            function addFactors(array) {
                var sum = 0;
                for (var i = 0; i < array.length; i++) {
                    sum += array[i];
                }
                return sum;
            }
//            var arr = [9, 8, 100];
//            document.write("sum is: ", addFactors(getFactors(220)));
            function getFactors(num) {
                var array = [1];
                var root = Math.sqrt(num);
                var index = 1;
                for (var i = 2; i <= root; i++) {
                    if (isFactor(num, i)) {
                        array[index] = i;
                        index++;
                        if (num/i != i) {
                            array[index] = num/i;
                            index++;
                        }
                    }
                    
                }
                return array;
            }
//            document.write("TESTING: <br>", "factor of 284 is ", getFactors(284));
            function checkAmicable(num1, num2) {
                var factors1 = getFactors(num1);
                document.write("factors1 is: ", factors1, "<br>");
                var factors2 = getFactors(num2);
                document.write("factors2 is: ", factors2, "<br>");
                var sum1 = addFactors(factors1);
                document.write("SUM1 is: ", sum1, "<br>");
                var sum2 = addFactors(factors2);
                document.write("SUM2 is: ", sum2, "<br>");
                if ((sum1 == num2) && (sum2 = num1)) {
                    document.write("The given numbers are amicable! <br>");
                }
                else {
                    document.write("The given numbers are not amicable <br>");
                }
            }
        </script>
    </body>
</html>